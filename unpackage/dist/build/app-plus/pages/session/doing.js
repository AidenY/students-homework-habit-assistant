"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var R=Object.create;var w=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var B=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var z=(t,r,i,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of P(r))!I.call(t,s)&&s!==i&&w(t,s,{get:()=>r[s],enumerable:!(a=D(r,s))||a.enumerable});return t};var L=(t,r,i)=>(i=t!=null?R(E(t)):{},z(r||!t||!t.__esModule?w(i,"default",{value:t,enumerable:!0}):i,t));var d=(t,r,i)=>new Promise((a,s)=>{var o=l=>{try{u(i.next(l))}catch(f){s(f)}},n=l=>{try{u(i.throw(l))}catch(f){s(f)}},u=l=>l.done?a(l.value):Promise.resolve(l.value).then(o,n);u((i=i.apply(t,r)).next())});var C=B((O,S)=>{S.exports=Vue});var e=L(C());function c(t,r,...i){uni.__log__?uni.__log__(t,r,...i):console[t].apply(console,[...i,r])}var m=null;function h(t){let r=Math.floor(Math.random()*t.length);return t[r]}function M({intervalMs:t=3e3,onResult:r}){p(),m=setInterval(()=>{let i=Date.now(),a=h(["good","good","good","bend","lie","leave"]),s=h(["focus","focus","focus","distract"]),o=h(["writing","writing","thinking","idle"]);typeof r=="function"&&r({timestamp:i,postureState:a,focusState:s,taskState:o,triggeredReminders:[]})},t)}function p(){m&&(clearInterval(m),m=null)}function y(t){if(!t||t<=0)return"00:00";let r=Math.floor(t/1e3),i=Math.floor(r/3600),a=Math.floor(r%3600/60),s=r%60,o=n=>n<10?"0"+n:""+n;return i>0?`${o(i)}:${o(a)}:${o(s)}`:`${o(a)}:${o(s)}`}var A=["\u5C0F\u670B\u53CB\u5750\u76F4\u4E00\u70B9\uFF0C\u80A9\u8180\u653E\u677E\uFF0C\u6211\u4EEC\u4E00\u8D77\u4FDD\u62A4\u810A\u6881\u9AA8\uFF5E","\u8EAB\u4F53\u4E0D\u8981\u592A\u8D34\u8FD1\u4E66\u672C\uFF0C\u773C\u775B\u548C\u4E66\u672C\u8981\u4FDD\u6301\u4E00\u5C3A\u7684\u8DDD\u79BB\u54E6\u3002","\u8BB0\u5F97\u4E24\u53EA\u811A\u5E73\u653E\u5728\u5730\u4E0A\uFF0C\u50CF\u4E00\u68F5\u5C0F\u6811\u4E00\u6837\u7AD9\u5F97\u7A33\u3002"],_=["\u521A\u521A\u6709\u70B9\u8D70\u795E\u4E86\uFF0C\u6211\u4EEC\u4E00\u8D77\u628A\u6CE8\u610F\u529B\u62C9\u56DE\u6765\u5427\uFF5E","\u5148\u628A\u8FD9\u9053\u9898\u8BA4\u771F\u5B8C\u6210\uFF0C\u518D\u60F3\u522B\u7684\u4E8B\u60C5\u4E5F\u4E0D\u8FDF\u3002","\u518D\u575A\u6301\u51E0\u5206\u949F\uFF0C\u4F60\u4ECA\u5929\u5C31\u4F1A\u6BD4\u6628\u5929\u66F4\u68D2\uFF01"],N=["\u5982\u679C\u4E00\u9053\u9898\u5361\u4F4F\u592A\u4E45\uFF0C\u53EF\u4EE5\u5148\u505A\u540E\u9762\u7684\uFF0C\u518D\u56DE\u6765\u89E3\u51B3\u5B83\u3002","\u5148\u5B8C\u6210\u7B80\u5355\u7684\u9898\u76EE\uFF0C\u7ED9\u81EA\u5DF1\u4E00\u70B9\u5C0F\u5C0F\u7684\u6210\u5C31\u611F\uFF5E"];function x(t){let r=Math.floor(Math.random()*t.length);return t[r]}function k(t,r){return d(this,null,function*(){let i=r;i||(t==="posture"?i=x(A):t==="focus"?i=x(_):i=x(N));try{uni.showToast({title:i.length>7?i.slice(0,7)+"...":i,icon:"none",duration:2e3}),uni.vibrateShort&&uni.vibrateShort({})}catch(a){c("warn","at common/voiceReminder.js:30","playReminder toast error",a)}return i})}var b=class{constructor(){this.videoStream=null,this.videoElement=null,this.devicePosition="front",this.isRunning=!1,this.onErrorCallback=null,this.onReadyCallback=null}init(){return d(this,arguments,function*(r={}){let{devicePosition:i="front",onReady:a,onError:s,videoElement:o}=r;return this.devicePosition=i,this.onReadyCallback=a,this.onErrorCallback=s,this.videoElement=o,this.initApp()})}initH5(){return d(this,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 getUserMedia API");let r=this.devicePosition==="front"?"user":"environment",i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:r,width:{ideal:1280},height:{ideal:720}}});if(this.videoStream=i,this.isRunning=!0,this.videoElement){let a=typeof this.videoElement=="string"?document.querySelector(this.videoElement):this.videoElement;a&&(a.srcObject!==void 0?a.srcObject=i:a.setAttribute&&a.setAttribute("src",URL.createObjectURL(i)),yield a.play())}return this.onReadyCallback&&this.onReadyCallback(),{success:!0,message:"\u6444\u50CF\u5934\u542F\u52A8\u6210\u529F"}}catch(r){return this.isRunning=!1,c("error","at common/cameraService.js:99","H5 \u6444\u50CF\u5934\u521D\u59CB\u5316\u5931\u8D25:",r),this.onErrorCallback&&this.onErrorCallback(r),{success:!1,error:r.message}}})}initApp(){return this.isRunning=!0,this.onReadyCallback&&setTimeout(()=>{this.onReadyCallback()},500),{success:!0,message:"App \u6444\u50CF\u5934\u7EC4\u4EF6\u5DF2\u51C6\u5907"}}switchCamera(){return d(this,null,function*(){return this.devicePosition=this.devicePosition==="front"?"back":"front",{success:!0,message:"\u8BF7\u901A\u8FC7\u9875\u9762\u7EC4\u4EF6\u5207\u6362\u6444\u50CF\u5934"}})}stop(){this.isRunning=!1}getDevicePosition(){return this.devicePosition}isActive(){return this.isRunning}},T=new b,V={page:{"":{flex:1,backgroundColor:"#f3f7ff",paddingLeft:"16rpx",paddingRight:"16rpx",paddingTop:"16rpx",paddingBottom:"140rpx"}},"top-card":{"":{backgroundColor:"#ffffff",borderRadius:"24rpx",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",marginBottom:"16rpx"}},"time-row":{"":{flexDirection:"row",justifyContent:"space-between",marginBottom:"12rpx"}},"time-block":{"":{flex:1}},"time-label":{"":{fontSize:"24rpx",color:"#555555"}},"time-value":{"":{fontSize:"34rpx",fontWeight:"600",color:"#2c405a",marginTop:"4rpx"}},"progress-bar":{"":{height:"14rpx",borderRadius:"7rpx",backgroundColor:"#f0f3fa",overflow:"hidden"}},"progress-inner":{"":{height:"14rpx",borderRadius:"7rpx",backgroundColor:"#4ba3ff"}},"camera-card":{"":{marginTop:"12rpx",marginBottom:"16rpx",borderRadius:"24rpx",backgroundColor:"#ffffff",overflow:"hidden"}},"camera-view-wrapper":{"":{width:"750rpx",height:"520rpx",position:"relative",backgroundColor:"#000000"}},"camera-view":{"":{width:"750rpx",height:"520rpx",backgroundColor:"#000000"}},"camera-placeholder":{"":{position:"absolute",top:0,left:0,width:"750rpx",height:"520rpx",backgroundColor:"#1a1a1a",alignItems:"center",justifyContent:"center",flexDirection:"column",zIndex:1}},"placeholder-text":{"":{fontSize:"32rpx",color:"#ffffff",marginBottom:"12rpx"}},"placeholder-subtitle":{"":{fontSize:"24rpx",color:"#999999"}},"camera-overlay":{"":{paddingTop:"16rpx",paddingRight:"20rpx",paddingBottom:"18rpx",paddingLeft:"20rpx"}},"camera-title":{"":{fontSize:"30rpx",fontWeight:"600",color:"#2c405a",marginBottom:"6rpx"}},"camera-subtitle":{"":{fontSize:"24rpx",color:"#555555"}},"switch-row":{"":{marginTop:"10rpx"}},"camera-tip":{"":{fontSize:"22rpx",color:"#888888",marginBottom:"6rpx"}},"switch-btn":{"":{alignSelf:"flex-start",paddingLeft:"22rpx",paddingRight:"22rpx",paddingTop:"8rpx",paddingBottom:"8rpx",borderRadius:"32rpx",backgroundColor:"#e6f1ff"}},"switch-text":{"":{fontSize:"24rpx",color:"#2f80ff"}},"debug-panel":{"":{marginTop:"12rpx",paddingTop:"12rpx",paddingRight:"12rpx",paddingBottom:"12rpx",paddingLeft:"12rpx",backgroundColor:"#fff3cd",borderRadius:"8rpx",borderWidth:"1rpx",borderColor:"#ffc107"}},"debug-title":{"":{fontSize:"26rpx",fontWeight:"600",color:"#856404",marginBottom:"8rpx"}},"debug-item":{"":{fontSize:"22rpx",color:"#856404",marginBottom:"4rpx",lines:3}},"debug-error":{"":{color:"#dc3545"}},"debug-btn-row":{"":{flexDirection:"row",marginTop:"8rpx",justifyContent:"space-between"}},"debug-btn":{"":{flex:1,marginRight:"8rpx",paddingTop:"6rpx",paddingRight:"12rpx",paddingBottom:"6rpx",paddingLeft:"12rpx",backgroundColor:"#ffc107",borderRadius:"6rpx",alignItems:"center",justifyContent:"center","marginRight:last-child":0}},"debug-btn-text":{"":{fontSize:"22rpx",color:"#856404"}},"debug-toggle":{"":{marginTop:"8rpx",alignItems:"center"}},"debug-toggle-btn":{"":{paddingTop:"6rpx",paddingRight:"16rpx",paddingBottom:"6rpx",paddingLeft:"16rpx",backgroundColor:"#e6f1ff",borderRadius:"6rpx"}},"debug-toggle-text":{"":{fontSize:"22rpx",color:"#2f80ff"}},"status-row":{"":{flexDirection:"row",justifyContent:"space-between",marginBottom:"8rpx"}},"status-card":{"":{flex:1,marginRight:"8rpx",borderRadius:"20rpx",paddingTop:"14rpx",paddingRight:"16rpx",paddingBottom:"14rpx",paddingLeft:"16rpx",backgroundColor:"#f5f7fb","marginRight:last-child":0}},"status-label":{"":{fontSize:"24rpx",color:"#555555"}},"status-value":{"":{fontSize:"28rpx",fontWeight:"600",marginTop:"4rpx"},".status-good ":{color:"#2f9b59"},".status-focus ":{color:"#2f9b59"},".status-bend ":{color:"#f0ad4e"},".status-distract ":{color:"#f0ad4e"},".status-idle ":{color:"#f0ad4e"},".status-lie ":{color:"#dd524d"},".status-leave ":{color:"#dd524d"}},encourage:{"":{marginTop:"4rpx",marginBottom:"8rpx"}},"encourage-text":{"":{fontSize:"26rpx",color:"#2f9b59"}},"reminder-card":{"":{borderRadius:"24rpx",backgroundColor:"#ffffff",paddingTop:"18rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",marginBottom:"8rpx"}},"reminder-header":{"":{flexDirection:"row",justifyContent:"space-between",marginBottom:"8rpx"}},"reminder-title":{"":{fontSize:"28rpx",fontWeight:"600",color:"#2c405a"}},"reminder-count":{"":{fontSize:"24rpx",color:"#555555"}},"reminder-content":{"":{flexDirection:"row",alignItems:"center"}},"reminder-icon":{"":{fontSize:"30rpx",marginRight:"6rpx"}},"reminder-text":{"":{fontSize:"26rpx",color:"#3f536e"}},"reminder-empty":{"":{fontSize:"26rpx",color:"#3f536e"}},"bottom-area":{"":{position:"fixed",left:0,right:0,bottom:"40rpx",paddingLeft:"32rpx",paddingRight:"32rpx"}},"danger-btn":{"":{height:"88rpx",borderRadius:"44rpx",backgroundColor:"#ff6b6b",alignItems:"center",justifyContent:"center"}},"danger-text":{"":{fontSize:"32rpx",color:"#ffffff"}}},j=(t,r)=>{let i=t.__vccOpts||t;for(let[a,s]of r)i[a]=s;return i},G={data(){return{startTime:0,expectedDuration:0,now:Date.now(),timer:null,snapshots:[],reminders:[],lastReminderText:"",reminderCount:0,postureState:"good",focusState:"focus",taskState:"writing",badStreak:0,devicePosition:"front",showDebugInfo:!1,permissionStatus:"\u672A\u77E5",cameraStatus:"\u672A\u77E5",cameraError:"",cameraErrorDetail:"",cameraReady:!1,initTimeout:null,permissionGranted:!1,useVideoStream:!1}},computed:{elapsedText(){return y(this.now-this.startTime)},expectedText(){return y(this.expectedDuration)},progressPercent(){if(!this.expectedDuration)return 0;let t=(this.now-this.startTime)/this.expectedDuration,r=Math.floor(t*100);return r<0&&(r=0),r>100&&(r=100),r},postureLabel(){return{good:"\u5750\u59FF\u7AEF\u6B63",bend:"\u6709\u70B9\u8DB4\u684C",lie:"\u51E0\u4E4E\u8DB4\u4E0B\u4E86",leave:"\u79BB\u5F00\u5EA7\u4F4D"}[this.postureState]||"\u5750\u59FF\u7AEF\u6B63"},focusLabel(){return{focus:"\u5F88\u4E13\u5FC3",distract:"\u6709\u70B9\u8D70\u795E"}[this.focusState]||"\u5F88\u4E13\u5FC3"},taskLabel(){return{writing:"\u6B63\u5728\u4E66\u5199",thinking:"\u5728\u601D\u8003",idle:"\u5728\u53D1\u5446"}[this.taskState]||"\u6B63\u5728\u4E66\u5199"},encourageText(){return this.postureState==="good"&&this.focusState==="focus"?"\u73B0\u5728\u7684\u72B6\u6001\u5F88\u68D2\uFF0C\u7EE7\u7EED\u4FDD\u6301\u54E6\uFF01":""}},created(){let t=this.$route&&this.$route.query?this.$route.query:{};this.startTime=Number(t.startTime)||Date.now(),this.expectedDuration=Number(t.expectedDuration)||30*60*1e3},mounted(){c("log","at pages/session/doing.nvue:231","doing page mounted")},onShow(){this.startTime=this.startTime||Date.now(),this.startTimers(),this.startDetection(),this.requestCameraPermission()},onHide(){this.clearTimers(),p(),this.initTimeout&&(clearTimeout(this.initTimeout),this.initTimeout=null),this.stopCamera()},beforeDestroy(){this.clearTimers(),p(),this.initTimeout&&(clearTimeout(this.initTimeout),this.initTimeout=null),this.stopCamera()},methods:{startTimers(){this.now=Date.now(),this.timer=setInterval(()=>{this.now=Date.now()},1e3)},clearTimers(){this.timer&&(clearInterval(this.timer),this.timer=null)},startDetection(){M({intervalMs:3e3,onResult:t=>{this.snapshots.push(t),this.postureState=t.postureState,this.focusState=t.focusState,this.taskState=t.taskState,t.postureState!=="good"||t.focusState!=="focus"?this.badStreak+=1:this.badStreak=0,this.badStreak>=2&&(this.triggerReminder(t),this.badStreak=0)}})},triggerReminder(t){return d(this,null,function*(){let r=t.postureState!=="good"?"posture":"focus",i=yield k(r);this.lastReminderText=i,this.reminderCount+=1,this.reminders.push({timestamp:Date.now(),type:r,text:i})})},replayLastReminder(){return d(this,null,function*(){this.lastReminderText&&(yield k("repeat",this.lastReminderText))})},switchCamera(){return d(this,null,function*(){yield T.switchCamera(),this.devicePosition=T.getDevicePosition(),this.cameraStatus=`\u6B63\u5728\u5207\u6362\u5230${this.devicePosition==="front"?"\u524D\u7F6E":"\u540E\u7F6E"}\u6444\u50CF\u5934...`})},endSession(){let t=Date.now();p(),this.clearTimers();let r={startTime:this.startTime,endTime:t,expectedDuration:this.expectedDuration,snapshots:this.snapshots,reminders:this.reminders};uni.navigateTo({url:"/pages/session/report",success:i=>{i.eventChannel&&i.eventChannel.emit("sessionFinished",r)}})},requestCameraPermission(){try{this.permissionStatus="\u8BF7\u6C42\u4E2D...",plus.android.requestPermissions(["android.permission.CAMERA"],t=>{t.granted&&t.granted.length>0?(this.permissionStatus="\u5DF2\u6388\u4E88",this.permissionGranted=!0,c("log","at pages/session/doing.nvue:372","nvue \u6444\u50CF\u5934\u6743\u9650\u5DF2\u6388\u4E88",t),setTimeout(()=>{this.startCamera()},300)):(this.permissionStatus="\u88AB\u62D2\u7EDD",this.permissionGranted=!1,c("log","at pages/session/doing.nvue:381","nvue \u6444\u50CF\u5934\u6743\u9650\u88AB\u62D2\u7EDD",t))},t=>{this.permissionStatus="\u8BF7\u6C42\u5931\u8D25: "+JSON.stringify(t),this.permissionGranted=!1,c("log","at pages/session/doing.nvue:387","nvue \u6444\u50CF\u5934\u6743\u9650\u8BF7\u6C42\u5931\u8D25: "+JSON.stringify(t)),uni.showToast({title:"\u672A\u6388\u4E88\u6444\u50CF\u5934\u6743\u9650\uFF0C\u65E0\u6CD5\u9884\u89C8\u753B\u9762",icon:"none",duration:3e3})})}catch(t){this.permissionStatus="\u5F02\u5E38: "+t.toString(),this.permissionGranted=!1,c("log","at pages/session/doing.nvue:398","nvue \u6444\u50CF\u5934\u6743\u9650\u8BF7\u6C42\u5F02\u5E38: "+t)}},startCamera(){return d(this,null,function*(){if(!this.permissionGranted){c("log","at pages/session/doing.nvue:407","\u6743\u9650\u672A\u6388\u4E88\uFF0C\u7B49\u5F85\u6743\u9650\u6388\u4E88\u540E\u518D\u542F\u52A8\u6444\u50CF\u5934");return}this.cameraStatus="\u6B63\u5728\u542F\u52A8\u6444\u50CF\u5934...",setTimeout(()=>{this.cameraReady||(this.cameraReady=!0,this.cameraStatus="\u6444\u50CF\u5934\u7EC4\u4EF6\u5DF2\u663E\u793A\uFF08\u5982\u753B\u9762\u4ECD\u4E3A\u9ED1\u5C4F\uFF0C\u53EF\u80FD\u662F\u786C\u4EF6\u9650\u5236\uFF09",c("log","at pages/session/doing.nvue:454","App camera \u7EC4\u4EF6\u5DF2\u663E\u793A\uFF0C\u7B49\u5F85\u753B\u9762\u52A0\u8F7D"))},2e3),this.initTimeout&&clearTimeout(this.initTimeout),this.initTimeout=setTimeout(()=>{this.cameraReady||(this.cameraStatus="\u6444\u50CF\u5934\u521D\u59CB\u5316\u8D85\u65F6\u3002nvue camera \u7EC4\u4EF6\u53EF\u80FD\u5B58\u5728\u95EE\u9898\uFF0C\u4F46\u5176\u4ED6\u529F\u80FD\uFF08Mock \u68C0\u6D4B\u3001\u8BC4\u5206\u3001\u62A5\u544A\uFF09\u53EF\u6B63\u5E38\u4F7F\u7528",c("log","at pages/session/doing.nvue:465","\u6444\u50CF\u5934\u521D\u59CB\u5316\u8D85\u65F6\uFF0C\u4F46\u7EE7\u7EED\u8FD0\u884C\u5176\u4ED6\u529F\u80FD"),this.showDebugInfo||(this.showDebugInfo=!0))},5e3),setTimeout(()=>{this.checkCameraStatus()},1e3)})},startVideoStream(){return d(this,null,function*(){})},stopCamera(){this.cameraReady=!1},stopVideoStream(){this.stopCamera()},onVideoError(t){},onVideoPlay(t){},toggleDebugInfo(){this.showDebugInfo=!this.showDebugInfo},checkCameraStatus(){try{let t=plus.android.runtimeMainActivity(),r=plus.android.invoke(t,"getPackageManager"),i=plus.android.invoke(r,"hasSystemFeature","android.hardware.camera"),s=plus.android.importClass("android.hardware.Camera").getNumberOfCameras(),o=plus.android.importClass("android.content.pm.PackageManager"),l=plus.android.invoke(t,"checkSelfPermission","android.permission.CAMERA")===o.PERMISSION_GRANTED;this.permissionStatus=`\u6743\u9650\u68C0\u67E5: ${l?"\u5DF2\u6388\u4E88":"\u672A\u6388\u4E88"}`,this.cameraReady?this.cameraStatus=`\u6444\u50CF\u5934\u5DF2\u521D\u59CB\u5316\u5B8C\u6210 (\u8BBE\u5907\u652F\u6301: ${i?"\u662F":"\u5426"}, \u6570\u91CF: ${s})`:(this.cameraStatus=`\u7B49\u5F85 camera \u7EC4\u4EF6\u521D\u59CB\u5316... (\u8BBE\u5907\u652F\u6301: ${i?"\u662F":"\u5426"}, \u6570\u91CF: ${s}, \u6743\u9650: ${l?"\u5DF2\u6388\u4E88":"\u672A\u6388\u4E88"})`,l&&i&&s>0&&c("log","at pages/session/doing.nvue:627","\u6743\u9650\u548C\u8BBE\u5907\u90FD\u6B63\u5E38\uFF0C\u4F46 camera \u7EC4\u4EF6\u672A\u521D\u59CB\u5316\uFF0C\u53EF\u80FD\u662F\u8C03\u8BD5\u57FA\u5EA7\u9650\u5236"))}catch(t){this.cameraStatus="\u68C0\u67E5\u5931\u8D25: "+t.toString(),c("log","at pages/session/doing.nvue:632","\u68C0\u67E5\u6444\u50CF\u5934\u72B6\u6001\u5931\u8D25",t)}},onScanCode(t){c("log","at pages/session/doing.nvue:637","scan code",t)},onCameraStop(t){c("log","at pages/session/doing.nvue:640","camera stop",t),this.cameraStatus="\u6444\u50CF\u5934\u5DF2\u505C\u6B62"}}};function q(t,r,i,a,s,o){return(0,e.openBlock)(),(0,e.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,e.createElementVNode)("view",{class:"page doing-page"},[(0,e.createElementVNode)("view",{class:"top-card"},[(0,e.createElementVNode)("view",{class:"time-row"},[(0,e.createElementVNode)("view",{class:"time-block"},[(0,e.createElementVNode)("u-text",{class:"time-label"},"\u5DF2\u7528\u65F6\u95F4"),(0,e.createElementVNode)("u-text",{class:"time-value"},(0,e.toDisplayString)(o.elapsedText),1)]),(0,e.createElementVNode)("view",{class:"time-block"},[(0,e.createElementVNode)("u-text",{class:"time-label"},"\u9884\u8BA1"),(0,e.createElementVNode)("u-text",{class:"time-value"},(0,e.toDisplayString)(o.expectedText),1)])]),(0,e.createElementVNode)("view",{class:"progress-bar"},[(0,e.createElementVNode)("view",{class:"progress-inner",style:(0,e.normalizeStyle)({width:o.progressPercent+"%"})},null,4)])]),(0,e.createElementVNode)("view",{class:"camera-card"},[(0,e.createElementVNode)("view",{class:"camera-view-wrapper"},[s.permissionGranted?((0,e.openBlock)(),(0,e.createElementBlock)("camera",{key:0,id:"camera",class:"camera-view",mode:"normal",devicePosition:s.devicePosition,flash:"off",frameSize:"medium",enableMetadata:!1,onError:r[0]||(r[0]=(...n)=>t.onCameraError&&t.onCameraError(...n)),onInitdone:r[1]||(r[1]=(...n)=>t.onCameraInitDone&&t.onCameraInitDone(...n)),onStop:r[2]||(r[2]=(...n)=>o.onCameraStop&&o.onCameraStop(...n)),onScancode:r[3]||(r[3]=(...n)=>o.onScanCode&&o.onScanCode(...n))},null,40,["devicePosition"])):(0,e.createCommentVNode)("",!0),s.permissionGranted?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:1,class:"camera-placeholder"},[(0,e.createElementVNode)("u-text",{class:"placeholder-text"},"\u6444\u50CF\u5934\u9884\u89C8\u533A\u57DF"),(0,e.createElementVNode)("u-text",{class:"placeholder-subtitle"},"\u6743\u9650\u6388\u4E88\u540E\u5C06\u663E\u793A\u5B9E\u65F6\u753B\u9762")]))]),(0,e.createElementVNode)("view",{class:"camera-overlay"},[(0,e.createElementVNode)("u-text",{class:"camera-title"},"\u5B9E\u65F6\u6444\u50CF\u5934\u9884\u89C8"),(0,e.createElementVNode)("u-text",{class:"camera-subtitle"}," \u5F53\u524D\u4F7F\u7528\uFF1A"+(0,e.toDisplayString)(s.devicePosition==="front"?"\u524D\u7F6E\u6444\u50CF\u5934":"\u540E\u7F6E\u6444\u50CF\u5934"),1),(0,e.createElementVNode)("view",{class:"switch-row"},[(0,e.createElementVNode)("u-text",{class:"camera-tip"},"\u4FDD\u6301\u8138\u90E8\u51FA\u73B0\u5728\u753B\u9762\u4E2D\u95F4\uFF0C\u66F4\u5BB9\u6613\u8BC6\u522B\u59FF\u6001\uFF5E"),(0,e.createElementVNode)("view",{class:"switch-btn",onClick:r[4]||(r[4]=(...n)=>o.switchCamera&&o.switchCamera(...n))},[(0,e.createElementVNode)("u-text",{class:"switch-text"}," \u5207\u6362\u4E3A"+(0,e.toDisplayString)(s.devicePosition==="front"?"\u540E\u7F6E":"\u524D\u7F6E")+"\u6444\u50CF\u5934 ",1)])])]),s.showDebugInfo?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:0,class:"debug-panel"},[(0,e.createElementVNode)("u-text",{class:"debug-title"},"\u8C03\u8BD5\u4FE1\u606F"),(0,e.createElementVNode)("u-text",{class:"debug-item"},"\u6743\u9650\u72B6\u6001: "+(0,e.toDisplayString)(s.permissionStatus),1),(0,e.createElementVNode)("u-text",{class:"debug-item"},"\u6444\u50CF\u5934\u72B6\u6001: "+(0,e.toDisplayString)(s.cameraStatus),1),s.cameraError?((0,e.openBlock)(),(0,e.createElementBlock)("u-text",{key:0,class:"debug-item debug-error"},"\u9519\u8BEF\u4FE1\u606F: "+(0,e.toDisplayString)(s.cameraError),1)):(0,e.createCommentVNode)("",!0),s.cameraErrorDetail?((0,e.openBlock)(),(0,e.createElementBlock)("u-text",{key:1,class:"debug-item debug-error"},"\u9519\u8BEF\u8BE6\u60C5: "+(0,e.toDisplayString)(s.cameraErrorDetail),1)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("view",{class:"debug-btn-row"},[(0,e.createElementVNode)("view",{class:"debug-btn",onClick:r[5]||(r[5]=(...n)=>o.toggleDebugInfo&&o.toggleDebugInfo(...n))},[(0,e.createElementVNode)("u-text",{class:"debug-btn-text"},"\u9690\u85CF\u8C03\u8BD5")]),(0,e.createElementVNode)("view",{class:"debug-btn",onClick:r[6]||(r[6]=(...n)=>o.checkCameraStatus&&o.checkCameraStatus(...n))},[(0,e.createElementVNode)("u-text",{class:"debug-btn-text"},"\u68C0\u67E5\u72B6\u6001")])])])):((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:1,class:"debug-toggle"},[(0,e.createElementVNode)("view",{class:"debug-toggle-btn",onClick:r[7]||(r[7]=(...n)=>o.toggleDebugInfo&&o.toggleDebugInfo(...n))},[(0,e.createElementVNode)("u-text",{class:"debug-toggle-text"},"\u663E\u793A\u8C03\u8BD5\u4FE1\u606F")])]))]),(0,e.createElementVNode)("view",{class:"status-row"},[(0,e.createElementVNode)("view",{class:(0,e.normalizeClass)(["status-card","status-"+s.postureState])},[(0,e.createElementVNode)("u-text",{class:"status-label"},"\u5750\u59FF"),(0,e.createElementVNode)("u-text",{class:"status-value"},(0,e.toDisplayString)(o.postureLabel),1)],2),(0,e.createElementVNode)("view",{class:(0,e.normalizeClass)(["status-card","status-"+s.focusState])},[(0,e.createElementVNode)("u-text",{class:"status-label"},"\u4E13\u6CE8"),(0,e.createElementVNode)("u-text",{class:"status-value"},(0,e.toDisplayString)(o.focusLabel),1)],2),(0,e.createElementVNode)("view",{class:(0,e.normalizeClass)(["status-card","status-"+s.taskState])},[(0,e.createElementVNode)("u-text",{class:"status-label"},"\u72B6\u6001"),(0,e.createElementVNode)("u-text",{class:"status-value"},(0,e.toDisplayString)(o.taskLabel),1)],2)]),o.encourageText?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:0,class:"encourage"},[(0,e.createElementVNode)("u-text",{class:"encourage-text"},(0,e.toDisplayString)(o.encourageText),1)])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("view",{class:"reminder-card"},[(0,e.createElementVNode)("view",{class:"reminder-header"},[(0,e.createElementVNode)("u-text",{class:"reminder-title"},"\u6700\u8FD1\u63D0\u9192"),(0,e.createElementVNode)("u-text",{class:"reminder-count"},"\u5171 "+(0,e.toDisplayString)(s.reminderCount)+" \u6B21",1)]),s.lastReminderText?((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:0,class:"reminder-content",onClick:r[8]||(r[8]=(...n)=>o.replayLastReminder&&o.replayLastReminder(...n))},[(0,e.createElementVNode)("u-text",{class:"reminder-icon"},"\u{1F514}"),(0,e.createElementVNode)("u-text",{class:"reminder-text"},(0,e.toDisplayString)(s.lastReminderText),1)])):((0,e.openBlock)(),(0,e.createElementBlock)("view",{key:1,class:"reminder-empty"},[(0,e.createElementVNode)("u-text",{class:"reminder-text"},"\u5F53\u524D\u8868\u73B0\u4E0D\u9519\uFF0C\u7EE7\u7EED\u4FDD\u6301\uFF5E")]))]),(0,e.createElementVNode)("view",{class:"bottom-area"},[(0,e.createElementVNode)("view",{class:"danger-btn",onClick:r[9]||(r[9]=(...n)=>o.endSession&&o.endSession(...n))},[(0,e.createElementVNode)("u-text",{class:"danger-text"},"\u7ED3\u675F\u4F5C\u4E1A")])])])])}var g=j(G,[["render",q],["styles",[V]]]);var v=plus.webview.currentWebview();if(v){let t=parseInt(v.id),r="pages/session/doing",i={};try{i=JSON.parse(v.__query__)}catch(s){}g.mpType="page";let a=Vue.createPageApp(g,{$store:getApp({allowDefault:!0}).$store,__pageId:t,__pagePath:r,__pageQuery:i});a.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...g.styles||[]])),a.mount("#root")}})();
